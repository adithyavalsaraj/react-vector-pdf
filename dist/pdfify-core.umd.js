(function(R,C){typeof exports=="object"&&typeof module<"u"?C(exports,require("react"),require("jspdf")):typeof define=="function"&&define.amd?define(["exports","react","jspdf"],C):(R=typeof globalThis<"u"?globalThis:R||self,C(R.PdfifyCore={},R.React,R.jsPDF))})(this,(function(R,C,ot){"use strict";var W={exports:{}},D={};var B;function it(){if(B)return D;B=1;var f=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(o,n,a){var i=null;if(a!==void 0&&(i=""+a),n.key!==void 0&&(i=""+n.key),"key"in n){a={};for(var s in n)s!=="key"&&(a[s]=n[s])}else a=n;return n=a.ref,{$$typeof:f,type:o,key:i,ref:n!==void 0?n:null,props:a}}return D.Fragment=e,D.jsx=r,D.jsxs=r,D}var Y={};var V;function st(){return V||(V=1,process.env.NODE_ENV!=="production"&&(function(){function f(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===pt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case c:return"Fragment";case k:return"Profiler";case g:return"StrictMode";case w:return"Suspense";case S:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(typeof t.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),t.$$typeof){case d:return"Portal";case _:return t.displayName||"Context";case A:return(t._context.displayName||"Context")+".Consumer";case y:var u=t.render;return t=t.displayName,t||(t=u.displayName||u.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return u=t.displayName||null,u!==null?u:f(t.type)||"Memo";case j:u=t._payload,t=t._init;try{return f(t(u))}catch{}}return null}function e(t){return""+t}function r(t){try{e(t);var u=!1}catch{u=!0}if(u){u=console;var p=u.error,x=typeof Symbol=="function"&&Symbol.toStringTag&&t[Symbol.toStringTag]||t.constructor.name||"Object";return p.call(u,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",x),e(t)}}function o(t){if(t===c)return"<>";if(typeof t=="object"&&t!==null&&t.$$typeof===j)return"<...>";try{var u=f(t);return u?"<"+u+">":"<...>"}catch{return"<...>"}}function n(){var t=X.A;return t===null?null:t.getOwner()}function a(){return Error("react-stack-top-frame")}function i(t){if(Q.call(t,"key")){var u=Object.getOwnPropertyDescriptor(t,"key").get;if(u&&u.isReactWarning)return!1}return t.key!==void 0}function s(t,u){function p(){K||(K=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",u))}p.isReactWarning=!0,Object.defineProperty(t,"key",{get:p,configurable:!0})}function h(){var t=f(this.type);return tt[t]||(tt[t]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),t=this.props.ref,t!==void 0?t:null}function v(t,u,p,x,L,$){var E=p.ref;return t={$$typeof:T,type:t,key:u,props:p,_owner:x},(E!==void 0?E:null)!==null?Object.defineProperty(t,"ref",{enumerable:!1,get:h}):Object.defineProperty(t,"ref",{enumerable:!1,value:null}),t._store={},Object.defineProperty(t._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(t,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(t,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:L}),Object.defineProperty(t,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:$}),Object.freeze&&(Object.freeze(t.props),Object.freeze(t)),t}function l(t,u,p,x,L,$){var E=u.children;if(E!==void 0)if(x)if(mt(E)){for(x=0;x<E.length;x++)m(E[x]);Object.freeze&&Object.freeze(E)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else m(E);if(Q.call(u,"key")){E=f(t);var O=Object.keys(u).filter(function(bt){return bt!=="key"});x=0<O.length?"{key: someKey, "+O.join(": ..., ")+": ...}":"{key: someKey}",nt[E+x]||(O=0<O.length?"{"+O.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,x,E,O,E),nt[E+x]=!0)}if(E=null,p!==void 0&&(r(p),E=""+p),i(u)&&(r(u.key),E=""+u.key),"key"in u){p={};for(var U in u)U!=="key"&&(p[U]=u[U])}else p=u;return E&&s(p,typeof t=="function"?t.displayName||t.name||"Unknown":t),v(t,E,p,n(),L,$)}function m(t){P(t)?t._store&&(t._store.validated=1):typeof t=="object"&&t!==null&&t.$$typeof===j&&(t._payload.status==="fulfilled"?P(t._payload.value)&&t._payload.value._store&&(t._payload.value._store.validated=1):t._store&&(t._store.validated=1))}function P(t){return typeof t=="object"&&t!==null&&t.$$typeof===T}var b=C,T=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),_=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),pt=Symbol.for("react.client.reference"),X=b.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=Object.prototype.hasOwnProperty,mt=Array.isArray,M=console.createTask?console.createTask:function(){return null};b={react_stack_bottom_frame:function(t){return t()}};var K,tt={},et=b.react_stack_bottom_frame.bind(b,a)(),rt=M(o(a)),nt={};Y.Fragment=c,Y.jsx=function(t,u,p){var x=1e4>X.recentlyCreatedOwnerStacks++;return l(t,u,p,!1,x?Error("react-stack-top-frame"):et,x?M(o(t)):rt)},Y.jsxs=function(t,u,p){var x=1e4>X.recentlyCreatedOwnerStacks++;return l(t,u,p,!0,x?Error("react-stack-top-frame"):et,x?M(o(t)):rt)}})()),Y}var G;function at(){return G||(G=1,process.env.NODE_ENV==="production"?W.exports=it():W.exports=st()),W.exports}var H=at();function ft(f){return!f&&f!==0?{top:0,right:0,bottom:0,left:0}:typeof f=="number"?{top:f,right:f,bottom:f,left:f}:{top:f.top??0,right:f.right??0,bottom:f.bottom??0,left:f.left??0}}function z(f){const e=f.replace("#","");if(e.length===3){const r=parseInt(e[0]+e[0],16),o=parseInt(e[1]+e[1],16),n=parseInt(e[2]+e[2],16);return[r,o,n]}if(e.length===6){const r=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16);return[r,o,n]}return null}function q(f,e=!0){if(f<=0)return String(f);const r=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let o=f,n="";for(const[a,i]of r)for(;o>=a;)n+=i,o-=a;return e?n:n.toLowerCase()}class J{constructor(e={}){this.cursorX=0,this.cursorY=0,this.contentWidth=0,this.margin={top:15,right:15,bottom:15,left:15},this.defaultFont={name:void 0,style:"normal",size:12},this.defaultColor="#111827",this.defaultLineHeight=1.25,this.margin=e.margin??this.margin,this.defaultFont={name:e.font?.name,style:e.font?.style??"normal",size:e.font?.size??12},this.defaultColor=e.color??this.defaultColor,this.defaultLineHeight=e.lineHeight??this.defaultLineHeight,this.pdf=new ot.jsPDF({unit:e.unit??"mm",format:e.format??"a4",orientation:e.orientation??"p"}),this.pageWidth=this.pdf.internal.pageSize.getWidth(),this.pageHeight=this.pdf.internal.pageSize.getHeight(),this.resetFlowCursor(),this.applyBaseFont()}get instance(){return this.pdf}get width(){return this.pageWidth}get height(){return this.pageHeight}get contentLeft(){return this.margin.left}get contentRight(){return this.pageWidth-this.margin.right}get contentTop(){return this.margin.top}get contentBottom(){return this.pageHeight-this.margin.bottom}get contentHeight(){return this.contentBottom-this.contentTop}get contentAreaWidth(){return this.contentWidth}resetFlowCursor(){this.cursorX=this.margin.left,this.cursorY=this.margin.top,this.contentWidth=this.pageWidth-this.margin.left-this.margin.right}setHeaderFooter(e,r){this.headerDrawer=e,this.footerDrawer=r}applyBaseFont(){const e=this.defaultFont.name??this.pdf.getFont().fontName;this.pdf.setFont(e,this.defaultFont.style),this.pdf.setFontSize(this.defaultFont.size);const r=z(this.defaultColor);r&&this.pdf.setTextColor(...r)}addPage(){this.pdf.addPage(),this.resetFlowCursor()}ensureSpace(e){this.cursorY+e>this.contentBottom&&this.addPage()}setTextStyle(e){if(e){if(e.fontSize&&this.pdf.setFontSize(e.fontSize),e.fontStyle){const r=this.pdf.getFont().fontName;this.pdf.setFont(r,e.fontStyle)}if(e.color){const r=z(e.color);r&&this.pdf.setTextColor(...r)}}}textRaw(e,r,o,n,a,i="left"){this.setTextStyle(n);const s={align:i};typeof a=="number"&&(s.maxWidth=a),this.pdf.text(e,r,o,s),this.applyBaseFont()}box(e,r,o,n,a){const i=a??{};if(i.fillColor){const s=z(i.fillColor);s&&this.pdf.setFillColor(...s),this.pdf.rect(e,r,o,n,"F")}if(i.borderWidth||i.borderColor){if(i.borderWidth&&this.pdf.setLineWidth(i.borderWidth),i.borderColor){const s=z(i.borderColor);s&&this.pdf.setDrawColor(...s)}this.pdf.rect(e,r,o,n),this.pdf.setLineWidth(.2),this.pdf.setDrawColor(0,0,0)}}line(e,r,o,n){this.pdf.line(e,r,o,n)}async imageFromUrl(e,r,o,n,a,i="PNG"){const s=await this.loadImageAsDataURL(e);this.pdf.addImage(s,i,r,o,n,a)}loadImageAsDataURL(e){return new Promise((r,o)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{const a=document.createElement("canvas");a.width=n.width,a.height=n.height;const i=a.getContext("2d");if(!i)return o(new Error("Canvas 2D context not available"));i.drawImage(n,0,0),r(a.toDataURL("image/png"))},n.onerror=a=>o(a),n.src=e})}paragraph(e,r,o){const n=o??this.contentWidth;this.setTextStyle(r);const a=r?.lineHeight??this.defaultLineHeight,i=r?.fontSize??this.defaultFont.size,s=i*a*.3528,h=this.pdf.splitTextToSize(e,n),v=h.length*s;this.ensureSpace(v);const l=r?.align??"left";return h.forEach((m,P)=>{const b=this.cursorY+P*s+i*.3528;this.pdf.text(m,this.cursorX,b,{align:l,maxWidth:n})}),this.cursorY+=v+1,this.applyBaseFont(),v}moveCursor(e,r){this.cursorX+=e,this.cursorY+=r}setCursor(e,r){this.cursorX=e,this.cursorY=r}getCursor(){return{x:this.cursorX,y:this.cursorY}}getPageCount(){return this.pdf.getNumberOfPages()}applyHeaderFooter(){const e=this.getPageCount();if(!(!this.headerDrawer&&!this.footerDrawer)){for(let r=1;r<=e;r++)this.pdf.setPage(r),this.headerDrawer&&this.headerDrawer(this.pdf,r,e,this),this.footerDrawer&&this.footerDrawer(this.pdf,r,e,this);this.pdf.setPage(e)}}measureText(e,r,o){this.setTextStyle(r);const n=r?.fontSize??this.defaultFont.size,a=r?.lineHeight??this.defaultLineHeight,i=n*a*.3528;if(o){const s=this.pdf.splitTextToSize(e,o);return{width:o,height:s.length*i+n*.3528/2}}else{const s=this.pdf.getTextDimensions(e);return{width:s.w,height:s.h}}}setMetadata(e){e.title&&this.pdf.setDocumentProperties({title:e.title}),e.author&&this.pdf.setDocumentProperties({author:e.author}),e.subject&&this.pdf.setDocumentProperties({subject:e.subject}),e.keywords&&this.pdf.setDocumentProperties({keywords:e.keywords.join(", ")})}save(e){this.applyHeaderFooter(),this.pdf.save(e)}}const Z=C.createContext(null),I=()=>{const f=C.useContext(Z);if(!f)throw new Error("usePdf must be used within <PdfDocument>");return f},ut=({options:f,header:e,footer:r,pageNumbers:o,centerLabel:n,metadata:a,children:i,onReady:s,filename:h,autoSave:v=!1})=>{const[l]=C.useState(()=>new J(f));return C.useEffect(()=>{a&&l.setMetadata(a)},[l,a]),C.useEffect(()=>{const m=(d,c)=>!c||c==="all"?!0:c==="first-only"?d===1:c==="except-first"?d>1:Array.isArray(c)?c.includes(d):!0,P=(d,c)=>c==="roman-upper"?q(d,!0):c==="roman-lower"?q(d,!1):String(d),b=(d,c,g)=>{if(!o?.enabled||!m(c,o.scope))return;const k=o.preset??"page-slash-total",_=(o.template??(k==="page-slash-total"?"Page {page}/{total}":k==="page-of-total"?"Page {page} of {total}":"{page}/{total}")).replace("{page}",P(c,o.format)).replace("{total}",P(g,o.format)),y=o.align??"right",w=y==="left"?l.contentLeft+(o.offsetX??0):y==="right"?l.contentRight-(o.offsetX??0):(l.contentLeft+l.contentRight)/2+(o.offsetX??0),S=d==="header"?10:l.height-7,F=typeof o.y=="number"?o.y:S;l.textRaw(_,w,F,o.style,void 0,y)},T=(d,c,g)=>{if(!n?.enabled||!m(c,n.scope))return;const k="center",A=(l.contentLeft+l.contentRight)/2+(n.offsetX??0),_=d==="header"?10:l.height-7,y=typeof n.y=="number"?n.y:_;l.textRaw(n.text,A,y,n.style,void 0,k)};l.setHeaderFooter((d,c,g)=>{e&&e(l,c,g),o?.position==="header"&&b("header",c,g),n?.position==="header"&&T("header",c)},(d,c,g)=>{o?.position==="footer"&&b("footer",c,g),r&&r(l,c,g),n?.position==="footer"&&T("footer",c)}),s?.(l)},[]),C.useEffect(()=>{v&&h&&l.save(h)},[v,h]),H.jsx(Z.Provider,{value:l,children:i})},ct=({children:f,x:e,y:r,maxWidth:o,spacingBelow:n=2,...a})=>{const i=I();if(typeof e=="number"&&typeof r=="number")i.textRaw(f,e,r,a,o,a.align);else{i.paragraph(f,a,o);const s=i.getCursor();i.setCursor(s.x,s.y+n)}return null},lt=({x:f,y:e,w:r,h:o,children:n,...a})=>{const i=I(),s=ft(a.padding);if(typeof f=="number"&&typeof e=="number"&&typeof r=="number"&&typeof o=="number")return i.box(f,e,r,o,a),null;const h=i.getCursor(),v=h.x+s.left,l=h.y+s.top;i.contentAreaWidth-s.left-s.right,i.setCursor(v,l);const m=i.getCursor().y,P=({children:b})=>H.jsx(H.Fragment,{children:b});return H.jsxs(P,{children:[n,(()=>{const b=i.getCursor(),d=Math.max(b.y-m,0)+s.top+s.bottom;return i.box(h.x,h.y,i.contentAreaWidth,d,a),i.setCursor(h.x,h.y+d),null})()]})},ht=({src:f,x:e,y:r,w:o,h:n,mime:a="PNG",flow:i=!1})=>{const s=I();return C.useEffect(()=>{let h=r;i&&(h=s.getCursor().y),s.imageFromUrl(f,e,h,o,n,a).then(()=>{i&&s.moveCursor(0,n+2)}).catch(console.error)},[f,e,r,o,n,a,i]),null},dt=({columns:f,data:e,rowHeight:r=8,headerStyle:o,cellStyle:n,zebra:a=!0,topGap:i=2})=>{const s=I(),h=1,v=1,l=s.getCursor();s.setCursor(l.x,l.y+i);let m=s.getCursor().x;const P=s.getCursor().y;let b=0;f.forEach(g=>{b+=g.width});const T=r;o?.fillColor&&s.box(m,P,b,T,o);let d=m;f.forEach(g=>{s.textRaw(String(g.header),d+h,P+v+3,o,g.width-h*2,g.align??"left"),s.box(d,P,g.width,T,{...o,borderWidth:.2,fillColor:void 0}),d+=g.width});let c=P+T;return e.forEach((g,k)=>{let A=0;f.forEach(w=>{const S=g[w.key]?String(g[w.key]):"";if(!S)return;const F=w.width-h*2,j=s.measureText(S,n,F);j.height>A&&(A=j.height)});const _=Math.max(r,A+v*2);c+_>s.contentBottom&&(s.addPage(),m=s.contentLeft,c=s.contentTop),a&&k%2===1&&s.box(m,c,b,_,{fillColor:"#f5f5f5"});let y=m;f.forEach(w=>{const S=g[w.key];if(S){const F=y+h,j=n?.fontSize??12,N=c+v+j*.75;s.textRaw(String(S),F,N,n,w.width-h*2,w.align??"left")}s.box(y,c,w.width,_,{borderWidth:.2}),y+=w.width}),c+=_}),s.setCursor(m,c+1),null},gt=({items:f,ordered:e=!1,style:r,indent:o=5,markerWidth:n=5,spacing:a=2})=>{const i=I();return f.forEach((s,h)=>{const v=e?`${h+1}.`:"â€¢",l=i.getCursor().y,m=i.getCursor().x+o+n;i.textRaw(v,i.getCursor().x+o,l,r,n,"right");const P=i.getCursor().x;i.setCursor(m,l);const b=i.contentRight-m;i.paragraph(s,r,b);const T=i.getCursor().y;i.setCursor(P,T+a)}),null};R.PdfBox=lt,R.PdfDocument=ut,R.PdfImage=ht,R.PdfList=gt,R.PdfRenderer=J,R.PdfTable=dt,R.PdfText=ct,Object.defineProperty(R,Symbol.toStringTag,{value:"Module"})}));
